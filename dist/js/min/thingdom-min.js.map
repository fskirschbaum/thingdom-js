{"version":3,"file":"thingdom-min.js","sources":["../thingdom.js"],"names":["root","this","previous_thingdom","Thingdom","$_$","Deferred","self","state","value","fulfilled","rejected","changeStateFn","newState","buffer","givenValue","forEach","fn","states","resolve","reject","then","onFulfilment","onRejection","p","constructor","givenFn","protection","setTimeout","error","reason","push","restrict","define","deferred","xhrs","XMLHttpRequest","ActiveXObject","_xhrf","hasOwnProperty","Object","prototype","nativeForEach","Array","_each","o","ctx","length","i","l","call","breaker","key","_extend","slice","arguments","a","xhr","f","req","e","_xhrResp","getResponseHeader","split","responseXML","JSON","parse","responseText","_formData","kvps","regEx","k","encodeURIComponent","replace","toString","join","ajax","timer","n","userAgent","lang","type","data","dataType","timeout","abort","timeoutFn","url","onComplete","success","onError","onreadystatechange","readyState","clearTimeout","status","indexOf","responseJSON","statusText","complete","progress","isPost","open","isJson","stringify","setRequestHeader","send","ThingdomClass","$self","$endpoint","responses","errors","errorHandler","console","post","command","callback","withCredentials","getAPISecret","scripts","document","getElementsByTagName","apiSecret","src","uri","parseUri","str","options","m","parser","strictMode","exec","q","name","$0","$1","$2","strict","loose","getAttribute","file","queryKey","api_secret","intitialize","postData","device_secret","intitializeCallback","response","msg","Thing","thing_id","token","thing_code","$parent","$_post","application_token","feed_categories","status_keys","feed_category","action","display_name","product_type","actions","cmd","values","product_name","feed_categoryCallback","log","feed","category","message","feedCallback","status_key","is_digital","status_keyCallback","unit","status_array","statusCallback","statusArray","statusArr","things","getThing","getThingPromise","onThingGot","pointer","_xhr","code","onThingError","getThingCallback","noConflict"],"mappings":"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"}