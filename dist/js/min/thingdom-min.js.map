{"version":3,"file":"thingdom-min.js","sources":["../thingdom.js"],"names":["root","this","$_$","Deferred","self","state","value","fulfilled","rejected","changeStateFn","newState","buffer","givenValue","forEach","fn","states","resolve","reject","then","onFulfilment","onRejection","p","constructor","givenFn","protection","setTimeout","error","reason","push","restrict","define","deferred","xhrs","XMLHttpRequest","ActiveXObject","_xhrf","hasOwnProperty","Object","prototype","nativeForEach","Array","_each","o","ctx","length","i","l","call","breaker","key","_extend","slice","arguments","a","xhr","f","req","e","_xhrResp","getResponseHeader","split","responseXML","JSON","parse","responseText","_formData","kvps","regEx","k","encodeURIComponent","replace","toString","join","ajax","timer","n","userAgent","lang","type","data","dataType","timeout","abort","timeoutFn","url","onComplete","success","onError","onreadystatechange","readyState","clearTimeout","status","indexOf","responseJSON","statusText","complete","progress","isPost","open","isJson","stringify","setRequestHeader","send","ThingdomIO","api_secret","$self","$device_secret","$endpoint","$apiSecret","$application_token","responses","lastError","errorHandler","post","command","callback","rePost","returnData","rCommand","rData","rCallback","token","application_token","withCredentials","response","getApplicationToken","setApplicationToken","apiSecret","device_secret","applicationTokenPromise","postData","getApplicationTokenCallback","ThingIO","thing_id","thing_code","$thing_id","feed","message","category","feed_category","feedCallback","msg","unit","errors","status_array","name","statusCallback","statusArray","statusArr","getThing","product_type","getThingCallback","thing","code","Thingdom"],"mappings":"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"}