{"version":3,"file":"thingdom-min.js","sources":["../thingdom.js"],"names":["root","this","$_$","Deferred","self","state","value","fulfilled","rejected","changeStateFn","newState","buffer","givenValue","forEach","fn","states","resolve","reject","then","onFulfilment","onRejection","p","constructor","givenFn","protection","setTimeout","error","reason","push","restrict","define","deferred","xhrs","XMLHttpRequest","ActiveXObject","_xhrf","hasOwnProperty","Object","prototype","nativeForEach","Array","_each","o","ctx","length","i","l","call","breaker","key","_extend","slice","arguments","a","xhr","f","req","e","_xhrResp","getResponseHeader","split","responseXML","JSON","parse","responseText","_formData","kvps","regEx","k","encodeURIComponent","replace","toString","join","ajax","timer","n","userAgent","lang","type","data","dataType","timeout","abort","timeoutFn","url","onComplete","success","onError","onreadystatechange","readyState","clearTimeout","status","indexOf","responseJSON","statusText","complete","progress","isPost","open","isJson","stringify","setRequestHeader","send","ThingdomIO","api_secret","$self","$device_secret","$endpoint","$apiSecret","$application_token","lastError","errorHandler","post","command","callback","rePost","returnData","rCommand","rData","rCallback","token","application_token","withCredentials","response","msg","getApplicationToken","setApplicationToken","apiSecret","device_secret","applicationTokenPromise","postData","getApplicationTokenCallback","ThingIO","thing_id","thing_code","$thing_id","feed","message","category","feed_category","feedCallback","unit","status_array","name","statusCallback","statusArray","statusArr","getThing","product_type","getThingCallback","code","Thingdom"],"mappings":"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"}